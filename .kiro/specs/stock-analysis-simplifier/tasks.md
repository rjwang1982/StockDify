# 实现计划

- [x] 1. 创建新的 DSL 文件基础结构
  - 复制原有 DSL 文件作为基础
  - 重命名为新的工作流名称（如"股票分析工作流-小白版"）
  - 更新应用描述和图标
  - _需求: 1.1, 3.1, 3.2_

- [ ] 2. 添加小白版转换 LLM 节点
  - [ ] 2.1 定义 simplify_llm 节点配置
    - 设置节点类型为 llm
    - 配置模型提供商和模型名称
    - 设置温度参数为 0.8，max_tokens 为 1500
    - 定义节点位置坐标 (x: 1550, y: 380)
    - _需求: 1.2, 2.3_
  
  - [ ] 2.2 编写小白版转换 Prompt 模板
    - 创建系统角色定义
    - 添加输入变量引用（stock_code, price, recommendation, analyze_llm.text）
    - 编写转换要求（生活化比喻、避免术语、具体行动、百分比风险、字数控制）
    - 定义输出格式（股票概况、当前走势、风险提示、操作建议、总结）
    - _需求: 1.3, 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 3. 更新工作流图连接关系
  - [ ] 3.1 修改边连接配置
    - 删除原有的 analyze_llm → end 边连接
    - 添加新的 analyze_llm → simplify_llm 边连接
    - 添加新的 simplify_llm → end 边连接
    - 设置边的 sourceType 和 targetType 属性
    - _需求: 1.1, 3.2_
  
  - [ ] 3.2 调整 end 节点位置和输出
    - 更新 end 节点坐标为 (x: 1850, y: 300)
    - 增加节点高度为 180
    - 添加 simplified_analysis 输出字段
    - 配置 value_selector 指向 simplify_llm.text
    - _需求: 1.5, 3.4, 3.5_

- [ ]* 4. 添加可选的环境变量配置
  - 定义 simplifier_model_provider 环境变量
  - 定义 simplifier_model_name 环境变量
  - 设置默认值和描述
  - _需求: 2.1, 2.2, 2.4_

- [ ] 5. 验证 DSL 文件完整性
  - 检查 YAML 语法正确性
  - 验证所有节点 ID 唯一性
  - 确认边连接的 source 和 target 引用正确
  - 验证 value_selector 路径有效
  - _需求: 3.1, 3.2, 3.3_

- [ ]* 6. 创建测试用例文档
  - 编写基本流程测试用例
  - 编写多市场测试用例
  - 编写输出质量验证标准
  - _需求: 1.1, 1.3, 1.4, 4.1, 4.2, 4.3, 4.4, 4.5_
